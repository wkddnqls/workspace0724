<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<style>
    #area{
        background: gray;
        padding: 20px;
    }
    #area2{
        width: 100%;
        height: 500px;
        border: 2px solid red;
        background: wheat;
        padding: 10px;

    }
</style>

<body>
<div id="area">
   
<fieldset>
            <legend>취미</legend>
            <input type="checkbox" id="allcheckbox" onchange="allCheck(this)">
        <label for="allcheckbox">전체선택</label>

        <input type="checkbox" name="category" value="종합" id="종합" onchange="changeallcheck()">
        <label for="종합">종합</label>

        <input type="checkbox" name='category' value="스포츠" id="스포츠">
        <label for="스포츠">스포츠</label>

        <input type="checkbox" name='category' value="음악" id="음악">
        <label for="음악">음악</label>
       
         <br>
         <div style="margin-left:90px; margin-top:5px;">
         <input type="checkbox" name='category' value="여행" id="여행">
        <label for="여행">여행</label>

         <input type="checkbox" name='category' value="과학" id="과학">
         <label for="과학">과학</label>

         <input type="checkbox" name='category' value="역사/문화" id="역사/문화">
        <label for="역사/문화">역사/문화</label>
       </div>

        </fieldset>
    <button onclick="select()" >카테고리 선택</button>
    <div id="area2" class="area2"></div>

 <script>
   
   
  /* function allCheck(_allCheckBos){
        const isChecked =_allCheckBos.checked;
        const categoryBoxes = document.querySelectorAll("input[name=category]");
     for(let i=0 ;i<categoryBoxes.length ; i++){
        categoryBoxes[i].checked=isChecked;
    }}*/
function allCheck(_allCheckBox) {
  const isChecked = _allCheckBox.checked;
  const $categoryBoxes = $("input[name=category]");
  
  $categoryBoxes.prop("checked", isChecked); // ✔️ property 사용
}



/*
    function changeallcheck(){
        const categoryBoxes = document.querySelectorAll(`input[name=category]`);
        let isChecked = true;
for(let i=0 ;i<categoryBoxes.length ; i++){
        if(!categoryBoxes[i].checked){
            isChecked =false;
            break;
        }
      
     
    } 
   const allcheckbox = document.getElementById("allcheckbox");
   allcheckbox.checked = isChecked;  
}

  const categoryBoxes = document.querySelectorAll(`input[name=category]`);
    for(let i=0; i<categoryBoxes.length; i++){
        categoryBoxes[i].onchange = changeallcheck;
    }
*/
 function changeallcheck(){
 const $categoryBoxes = $("input[name=category]");
 let isChecked =true;
 $categoryBoxes.each(function(idx,el){
    if(!el.checked){
     isChecked = false;
     return false;

    }
 });

 $('#allcheckbox').prop('checked', isChecked);

 }

/*
 function select(){
    const categoryBoxes = document.querySelectorAll(`input[name=category]`);
     console.log(categoryBoxes);
    let str =" "; 
    for(let i=0 ;i<categoryBoxes.length ; i++){
        const box = categoryBoxes[i];
        if (box.checked) {
             str += (box.value + " "); // 선택된 값 이어붙이기
           }
    }
      const output = document.getElementById("area2");
   output.innerText= str;
 }*/

//jquery에서 배열.each(function(인덱스,요소){반복할코드})


 function select(){
    const $categoryBoxes = $("input[name=category]");
     let str =""; 
    $categoryBoxes.each(function(idx,el){
        if(el.checked){
            str+= (el.value+" ");
        }
    });
    
    $('#area2').text(str);
  




 }





 </script>
</div>
</body>
</html>